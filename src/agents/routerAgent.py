from crewai import Agent, Task
import agentops
from helpers.config import getSettings
from stores.llms import MakeLLm

settings = getSettings()

LLmOBJ = MakeLLm(settings.LLM_ROUTER, settings.LLM_TEMP)
llm = LLmOBJ.getLLm()

agentops.init(
    api_key=settings.AGENTOPS_API_KEY,
    skip_auto_end_session=True
)

router_agent = Agent(
    role="ูููู ุงูุชูุฌูู",
    goal="ููู ููุฉ ุงููุณุชุฎุฏู ุจุฏูุฉ ูุงูุฑุฏ ุนููู ุจุทุฑููุฉ ูุฏูุฏุฉ ูุจุณูุทุฉุ ุณูุงุก ูุงูุช ุชุญูุฉ ุฃู ุณุคุงู ุนุงู ุฃู ุทูุจ ุญุฌุฒ.",
    backstory="ูููู ุฐูู ูุทูู ูููุฐุจุ ุฏุงูููุง ุจูุฑุฏ ุนูู ุงููุณุชุฎุฏู ุจุดูู ูุฎุชุตุฑ ููุจุงุดุฑ ูู ุบูุฑ ุฃู ุชูููุฑ ุจุตูุช ุนุงูู ุฃู ุดุฑุญ.",
    llm=llm
)

router_task = Task(
    description="""
        ูุทููุจ ููู ุชุญููู ุงูุฑุณุงูุฉ ุงููุตูุฉ ุงููุงุฏูุฉ ูู ุงููุณุชุฎุฏู ูุชุญุฏูุฏ ููุนูุง ุจุฏูุฉ.

        ุงูุญุงูุงุช ุงูููููุฉ:
        1. ูู ุงูุฑุณุงูุฉ ูููุง ุชุญูุฉ (ุฒู: ูุฑุญุจุงูุ ุงูุณูุงู ุนููููุ ูุงูุ ุฃููุงูุ ุตุจุงุญ ุงูุฎูุฑ...)
           โ ุฑุฏ ุนูู ุงููุณุชุฎุฏู ุจูุทุงูุฉุ ุฒู ูุซูุงู:
             "ุฃููุงู ุจูู! ๐ ุชูุฏุฑ ุชุณุฃููู ุนู ุฎุฏูุงุชูุง ุฃู ุชุนูู ุญุฌุฒ ูู ุญุงุจุจ."

        2. ูู ุงูุฑุณุงูุฉ ุณุคุงู ุนุงู (ุฒู ุงูุฃุณุนุงุฑุ ุงูููุงุนูุฏุ ุงูุฎุฏูุงุช...)
           โ ุงููุงุชุฌ ูุงุฒู ูููู JSON ููุท ุจุงูุดูู ุงูุชุงูู:
             {"faq": true, "booking": false, "greeting": false}

        3. ูู ุงูุฑุณุงูุฉ ูููุง ููุฉ ุญุฌุฒ (ุฒู ุฃุญุฌุฒุ ุญุฌุฒุ ููุนุฏ...)
           โ ุงููุงุชุฌ ูุงุฒู ูููู JSON ููุท ุจุงูุดูู ุงูุชุงูู:
             {"faq": false, "booking": true, "greeting": false}

        4. ูู ูุด ูุงุถุญ ููุน ุงูุฑุณุงูุฉ
           โ {"faq": false, "booking": false, "greeting": false}

        โ๏ธ ุชุนูููุงุช ูููุฉ:
        - ุงูุฑุฏ ุงูููุงุฆู ููุท ุจุฏูู ุฃู ููุงู ุฅุถุงูู ุฃู ุชูููุฑ.
        - ูุง ุชูุชุจ "thinking" ุฃู ุฃู ูุต ุชูุถูุญู.
        - ูู ุงูุฑุฏ JSONุ ูุงุฒู ูููู ุจุงูุดูู ุงููุญุฏุฏ ุจุงูุถุจุท.
        - ูู ุงูุฑุฏ ูุตู (ุชุญูุฉ)ุ ูููู ุจุณูุท ูููุฐุจ ููุฏู.
    """,
    expected_output='ุฅูุง ุฑุฏ ูุตู ูุฏูุฏ ุฃู {"faq": true|false, "booking": true|false, "greeting": true|false}',
    agent=router_agent
)
